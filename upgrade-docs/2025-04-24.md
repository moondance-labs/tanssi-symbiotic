1. Set up environment variables

### Stagelight

```
NETWORK_ARGS=??
CURRENT_MIDDLEWARE_VERSION=1
MIDDLEWARE_ADDRESS=0xdbc3804a9d3164a438ec222a222e8d8b2dffa0de
NETWORK=0x8f7b28C2A36E805F4024c1AE1e96a4B75E50A512
NETWORK_MIDDLEWARE_SERVICE=?
OPERATOR_REWARDS_ADDRESS=0x5A1A8ce9f4D294AA1835252B5FE397d607d615C8
STAKER_REWARDS_PROXY_ADDRESS=0x14453f57A92881bA788d0CaF29AD6CCE1F9028F1
TOKEN_ADDRESS=0x5F47029799132400a475149AC4faEA7c10B86cc9
VAULT_ADDRESS=0x94bA7BB350D8D15720C70Ba9216985AA3165B67E
VAULT_FACTORY_ADDRESS=?
```

### Dancelight

```
NETWORK_ARGS=??
CURRENT_MIDDLEWARE_VERSION=1
MIDDLEWARE_ADDRESS=0xdf94aaf9684b676db9664a4e9790cfbbbe64ef85
NETWORK=0xdaD051447C4452e15B35B7F831ceE8DEb890f1a4
NETWORK_MIDDLEWARE_SERVICE=?
OPERATOR_REWARDS_ADDRESS=0x462AF341B95212f7f5c4B51Bb7941838961aB2B4
STAKER_REWARDS_PROXY_ADDRESS=0x54C3FDDFAFA33e7a0ECE37c61e0057bFf3A9EF96
TOKEN_ADDRESS=0x43609791bc5f1b42df1747cddabab77af65a5fe3
VAULT_ADDRESS=0xB94f8852443FB4faB18363D22a45cA64a8CF4482 
VAULT_FACTORY_ADDRESS=?
```

2. Deploy new stakerRewardsFactory:
```
make deploy-staker-rewards-factory
```

3. Set environment variable for STAKE_REWARDS_FACTORY_ADDRESS with result of previous step
```
STAKE_REWARDS_FACTORY_ADDRESS=??
```
4. Upgrade OperatorRewards:
```
make upgrade-operator-rewards
```

5. Upgrade Middleware:
```
make upgrade-middleware
```

6. Upgrade Staker Rewards:
```
make upgrade-staker-rewards-and-migrate
```

7. Upgrade documentation:
* Middleware Implementation
* ODefaultOperatorRewards Implementation
* ODefaultStakerRewardsFactory
* ODefaultStakerRewards Implementation for Vault Slashable

### All Addresses:

* Stagelight: https://moondancelabs.atlassian.net/wiki/spaces/TN/pages/129630213/Stagelight
* Dancelight: https://moondancelabs.atlassian.net/wiki/spaces/TN/pages/201752577/Dancelight
